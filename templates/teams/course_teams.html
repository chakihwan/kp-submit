<!doctype html>
<html>
<head><meta charset="utf-8"><title>팀 - {{ course.code }} {{ course.title }}</title></head>
<body class="p-6">
  {% include "_messages.html" %}
  <h1 class="text-2xl font-bold mb-2">{{ course.code }} {{ course.title }} - 팀</h1>

  {% if request.user == course.teacher %}
    <p class="mb-3 text-gray-700">교수자 메뉴:</p>
    <a href="{% url 'create_team' course_id=course.id %}" class="px-3 py-2 rounded bg-blue-600 text-white">팀 생성</a>
  {% else %}
    <div class="mb-6">
      {% include "teams/_join_by_code_form.html" %}
    </div>
  {% endif %}

  <h2 class="text-xl font-semibold mt-6 mb-2">팀 목록</h2>
  {% if teams %}
    <ul class="space-y-2">
      {% for t in teams %}
        <li class="p-3 border rounded">
          <div class="flex items-center justify-between">
            <div>
              <a href="{% url 'team_detail' team_id=t.id %}" class="font-medium">{{ t.name }}</a>
              <div class="text-sm text-gray-600">{{ t.description|default:"(설명 없음)" }}</div>
            </div>

            <div class="text-right">
              {% if request.user == course.teacher %}
                <div class="text-sm">팀코드: <span class="font-mono">{{ t.join_code }}</span></div>
                <a href="{% url 'team_request_list' team_id=t.id %}" class="text-sm underline">가입요청 보기</a>
              {% else %}
                {% with m=memberships.t.id %}
                {% endwith %}
              {% endif %}
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-600">아직 팀이 없습니다.</p>
  {% endif %}
</body>
</html>
