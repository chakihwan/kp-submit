{% extends 'base.html' %}
{% block title %}팀 상세{% endblock %}
{% block content %}

<div class="flex items-center justify-between bg-gray-100 px-6 py-4 rounded-t-2xl border-b">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">{{ team.name }}</h1>
    {% if team.description %}
      <p class="text-sm text-gray-600 mt-1">{{ team.description }}</p>
    {% endif %}
  </div>

  <div class="flex items-center gap-2">
    {% if is_owner %}
      <a href="{% url 'team_requests' team_id=team.id %}"
         class="px-3 py-1.5 rounded-lg border text-sm hover:bg-gray-50">
        가입 요청
      </a>
      <a href="{% url 'teacher_team_list' %}"
         class="px-3 py-1.5 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-500">
        팀 목록
      </a>
    {% else %}
      <a href="{% url 'teacher_team_list' %}"
         class="px-3 py-1.5 rounded-lg border text-sm hover:bg-gray-50">
        ← 팀 목록으로
      </a>
    {% endif %}
  </div>
</div>

  <!-- 팀장 전용 기능 -->
  {% if is_owner %}
  <div class="flex gap-2 mb-4">
    <a href="{% url 'assignment_create' team_id=team.id %}"
       class="px-3 py-1.5 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-500">
      과제 등록
    </a>
    <a href="{% url 'team_edit' team_id=team.id %}"
       class="px-3 py-1.5 rounded-lg border text-sm hover:bg-gray-50">
      팀 정보 수정
    </a>
    <a href="{% url 'team_delete' team_id=team.id %}"
       class="px-3 py-1.5 rounded-lg bg-red-600 text-white text-sm hover:bg-red-500">
      팀 삭제
    </a>
  </div>
  {% endif %}

  <!-- 과제 목록 -->
  <h2 class="text-lg font-semibold mt-6 mb-2">＊ 과제</h2>
  {% if assignments %}
    <div class="divide-y border rounded-xl bg-gray-50">
      {% for a in assignments %}
      <div class="p-4 flex items-center justify-between">
        <div>
          <div class="font-semibold">{{ a.title }}</div>
          <div class="text-sm text-gray-500">
            마감: {{ a.due_at|date:"Y-m-d H:i" }}
            {% if a.is_closed %}
              · <span class="text-red-600 font-semibold">마감됨</span>
            {% endif %}
          </div>
        </div>

        <div class="flex gap-2">
          <!-- 과제 상세보기 -->
          <a href="{% url 'assignment_detail' team_id=team.id assignment_id=a.id %}"
             class="px-3 py-1 rounded-lg border text-sm hover:bg-gray-100">
            상세보기
          </a>

          <!-- 팀원만 "제출하기" 버튼 -->
          {% if not is_owner and not a.is_closed %}
          <a href="{% url 'assignment_submit' team_id=team.id assignment_id=a.id %}"
             class="px-3 py-1 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-500">
            제출하기
          </a>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-sm text-gray-600">등록된 과제가 없습니다.</p>
  {% endif %}
</div>

{% endblock %}
