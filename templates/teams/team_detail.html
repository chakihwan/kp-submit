{% extends 'base.html' %}
{% block title %}팀 상세{% endblock %}
{% block content %}
<div class="grid gap-4">
  <div class="rounded-2xl border bg-white p-6 shadow-sm">
    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-xl font-semibold">{{ team.name }}</h1>
        <p class="mt-1 text-sm text-gray-600">{{ team.description|default:"(설명 없음)" }}</p>
      </div>
      {% if is_owner %}
      <div class="flex gap-2">
        <a class="px-3 py-1.5 rounded-lg border text-sm hover:bg-gray-50"
          href="{% url 'regen_team_code' team_id=team.id %}">코드 재발급</a>
        <a class="px-3 py-1.5 rounded-lg border text-sm hover:bg-gray-50"
          href="{% url 'team_request_list' team_id=team.id %}">가입요청</a>
        <a class="px-3 py-1.5 rounded-lg bg-red-600 text-white text-sm hover:bg-red-500"
          href="{% url 'team_delete' team_id=team.id %}">팀 삭제</a>
      </div>
      {% endif %}
    </div>
  </div>
<!-- 과제 목록 카드 -->
<div class="rounded-2xl border bg-white p-6 shadow-sm">
  <div class="flex items-center justify-between mb-3">
    <h2 class="text-lg font-semibold">과제</h2>
    {% if is_owner %}
      <a class="px-3 py-1.5 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-500"
         href="{% url 'assignment_create' team_id=team.id %}">과제 등록</a>
    {% endif %}
  </div>

  {% if assignments %}
    <div class="divide-y">
      {% for a in assignments %}
        <a href="{% url 'assignment_detail' team_id=team.id assignment_id=a.id %}"
           class="block py-3 hover:bg-gray-50 transition">
          <div class="flex items-center justify-between">
            <div>
              <div class="font-semibold">{{ a.title }}</div>
              <div class="text-sm text-gray-600">{{ a.due_at|date:"Y-m-d H:i" }} 마감 · 배점 {{ a.max_score }}</div>
            </div>
          </div>
          <p class="text-sm text-gray-600 mt-1 line-clamp-2">{{ a.description|default:"" }}</p>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-sm text-gray-600">등록된 과제가 없습니다.</p>
  {% endif %}
</div>
{% endblock %}
